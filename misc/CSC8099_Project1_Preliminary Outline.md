# 论文简单框架

------

##  Introduction（10%）

- **目标与研究问题**
  1. 设计并实现一个“自动化验证工具”，能够：
     - 离线单次模拟路径 → 自动批量更新 DTMC（`.tra`/`.pm`） → PRISM 再次验证；
  2. 展示在线动态更新流程，以支持动态概率监控。

------

## Background & Related Work（10%）

- 介绍关键概念BigraphER、PRISM Model Checking。
- 简要回顾 您论文中的 BigraphER→DTMC→PRISM 离线检验流程。
- 引用 Farrell et al. “Quantitative Operational Monitoring…”【filecite】，说明其运行时监控与动态模型更新的理论框架。（比如将其列为“运行时监控的定量方法”代表工作，简要介绍其“设计时DTMC→运行时监控→动态更新→轻量复检”思路【filecite】。）

------

## Methodology（30%）

###  场景 A：离线单次模拟 + 自动化工具验证

1. **详细步骤**

   前置：通过big文件得到tra、csl、svg

   - **调用PRISM** 得到原始概率。

     （prism -dtmc -importtrans file.tra file.csl）

   - 执行**脚本1**将`.tra` 转为 `.pm` 文件。

   - **调用PRISM**的`-simpath`指令得到一条模拟路径。

     （prism -dtmc file.pm -simpath 1000 path.txt） 1000为步数，不知道有没有优化

   - 解析 `path.txt`，更新 `.tra` 中概率为0/1，得到新的 `.tra`。

   - **调用PRISM** 得到新的概率值，并再次执行**脚本2**得到新的`.pm`。

     

     以上五步形成一个全自动工具**（模拟->更新->检验）**，用于“在已知一条示例路径时，自动修正 DTMC 并输出更新后的概率。

     > **回环处理说明：**  
     >
     > （详见下方*疑问）脚本**保留**一份 原tra文件的`.tra.clean`。

### 场景 B：在线动态更新（篇幅不够再展开）

1. **架构设计**

   - **Agent（Robot）进程**：
     - 模拟机器人运行，每当从 `i` → `j` 执行一次转移，即往 `path.txt` 添加一行 `i j`。
     - 在做下一步决策前，Agent 会读取共享文件 `latest.pm`更新后的最新模型，以支持实时决策。
   - **Verifier 进程**：
     - 后台守护，持续监控 `path.txt`；当检测到新的 `(i,j)` 时：
       1. 如果 `i` 尚未固定过，则调用批量更新脚本，只需传 `(i,j)` 而非整条路径，将相关行概率置为 1/0；
       2. 异步调用场景A中的自动化工具，生成新的`latest.pm、latest.tra`、新的概率值；

2. **动态更新策略**

   - PRISM 验证可在后台并行运行，Agent 不必被强制停顿。

     **监听->（读取->更新->检验）->反馈**

------

##  Results & Evaluation（30%）

### **单次示例对比（场景A）**

- **对比表展示如**：

  ```
  ---------------------------------------------------------
  | PCTL 性质                               | 原始  | 更新后 |
  ---------------------------------------------------------
  | P[F box_1_success & box_2_success]       | 0.0000 | 0.0000 |
  | P[F box_1_success & box_2_failure]       | 0.0264 | 0.0301 |
  | P[F box_1_failure & box_2_success]       | 0.0281 | 0.0229 |
  | P[F box_1_failure & box_2_failure]       | 0.0061 | 0.0070 |
  ---------------------------------------------------------
  ```

- **定性分析**：

  - 更新后“`box_1_success & box_2_failure`”概率上升，说明现实前缀增强了该组合发生的可能性；反映了模型与观测的对齐对决策的潜在意义。
  - 在 BDI Agent 角度，更新后模型能让 Agent 避免对已不可能发生的分支做无谓规划，从而提升决策效率。

### **在线动态演示（场景B）**

* （如需，视频展示两个进程运行）

- **定性分析**：
  - **实时性**：及时锁定刚观测到的状态。
  - **决策支持**：Agent 每次决策可基于最近一次验证结果，即动态获取概率信息。

------

##  Conclusion（10%）

- **项目总结**
- **研究问题回顾**
- **工作局限与未来展望**
  - 局限：当 DTMC 状态空间过大时，PRISM 每次验证开销高；若模拟路径直接到达终止标签，更新过程会导致模型完全确定化，后续验证无意义。
  - 未来工作：
    1. **直接集成到 BDI 平台**：让实际机器人运行日志替代模拟路径输入，实现全自动在线验证。
    2. **多 Agent 场景扩展**：研究在并行智能体环境下的实时概率更新与分布式验证。

------

##  References & Form（10%）

- **参考文献**





# * 疑问

* 问：重复状态场景是否需要考虑？目前使用big模型中可能已经避免了“状态1->6->2->3**->2**->8”的状态。如果有这种可能性，那么第二次遇到2时该如何考虑？

  答：需要考虑重复状态。对于重复状态，我们应该回到初始2的原始概率，而非使用更新后的实际概率1/0。这意味着，我们可能在脚本运行时需要记录一个原tra的副本，使得当再次遇到2时，我们使用的是原先的未修改的概率值。

  
